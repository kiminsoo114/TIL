2022-11-23

Nexacro17 

상황 : 차량번호와 소유자등록번호, 기업등록번호가 일치하는 상황에서만 EDIT창 활성화 필수입력값을 입력한 후 저장을 했을 때 그리드의 값이 하나만 있을 경우
더블클릭하여 수정팝업창을 열던가 또는 메인화면에서 삭제를 했을 때 동일한 ID 9999 OBJECT가 있다면서 조회,저장,초기화,삭제 등의 모든 기능이 멈추는 것을 확인.

원인파악 : 모든 버튼이 먹통이 되어서 F12를 눌러서 확인을 해보니 OBJECT ID가 같은 것이 있다면서 충돌이 일어나며 모든 버튼기능이 비활성화 되는 현상을 확인.
확인 결과 위의 설명처럼 같은 ID의 팝업창을 동시에 열어서 일어나는 충돌현상이였다.
수정팝업창에서 '삭제하시겠습니까?' 팝업의 확인 버튼 시 TRUE로 삭제 쿼리를 타고 그 이후 CallBack을 통해 '삭제되었습니다' 라는 팝업창이 뜨게끔 만들어 놨는데
gfnAlert의 id가 9999였으며 그 이후 fnSearch를 통해서 재조회를 하게끔 하였으나 그리드의 결과값이 없으므로 '검색목록이 없다'라는 마찬가지의 팝업 id 9999의 gfnAlert를 호출.
그로 인한 충돌이 일어나는 것을 확인.

해결방법 : '삭제되었습니다' 팝업창 자체를 트랜잭션으로 바꾸어서 해당 팝업창이 바로 fnSearch로 연결되지 않게끔하고 CallBack으로 this.Close();함수를 태웠다.
그 이후에 수정팝업창이 닫히면 부모창으로 CallBack을 보내서 거기서 fnSearch()가 일어나게끔 유도.
메인화면에서도 마찬가지로 바로 삭제 후 재조회가 아니라 삭제 트랜잭션으로 변환 후에 콜벡에 fnSearch()로 유도.
정상적으로 충돌없이 '삭제되었습니다'라는 메세지 이후 '검색결과가 없습니다'라는 팝업창이 충돌없이 뜨는 것을 확인.
로컬에서 테스트 후 계발계 테스트에서 확인 결과 충돌없음을 확인.
